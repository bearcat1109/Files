-- Written 11-29-2023. Pulls Employee last name, first name, N#, and
-- username. Made for Hunter.

SELECT DISTINCT
    spriden_first_name                         AS FirstName,
    spriden_last_name                          AS LastName,
    spriden_id                                 AS BannerID,
    gobtpac_external_user                      AS Username
FROM
         pebempl
         LEFT JOIN spriden ON spriden_pidm = pebempl_pidm
         LEFT JOIN gobtpac ON gobtpac_pidm = pebempl_pidm

WHERE
     (
      (UPPER(spriden_last_name) LIKE ('%' || UPPER(:Edit1) || '%'))
      OR
      (UPPER(spriden_first_name) LIKE ('%' || UPPER(:Edit1) || '%'))
      OR
      (spriden_id = UPPER(:Edit1))
      OR
      (gobtpac_external_user LIKE ('%' || (:Edit1) || '%'))
     )
    AND spriden_change_ind IS NULL
    AND spriden_entity_ind = 'P'
    AND :btnGo = 1
ORDER BY
    LastName
